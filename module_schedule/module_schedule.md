# Python. Шпаргалки: Библиотека `schedule`


Библиотека schedule в Python предназначена для простого и удобного планирования регулярного выполнения задач,  
которая позволяет установить, как часто должна выполняться определенная функция (например, каждый час, день, неделю)

## Установка

```bash
pip install schedule
```


### Использование
Чтобы запланировать задачу, необходимо определить функцию и использовать `schedule.every()`, чтобы назначить интервал выполнения.

#### Пример: запуск задачи каждые 10 секунд
```python
import schedule
import time

def job():
    print("Задача выполнена!")

# Запланировать выполнение задачи каждые 10 секунд
schedule.every(10).seconds.do(job)

while True:
    schedule.run_pending()
    time.sleep(1)  # Предотвращает чрезмерное использование процессора
```

Этот скрипт выполняет `job()` каждые 10 секунд. Цикл `while` постоянно проверяет наличие запланированных задач и выполняет их в нужное время.

### Запуск задач в определенное время
Вы можете запланировать выполнение задач в заданное время, используя `.at()` и другие параметры интервала:

```python
# Запустить задачу каждый день в 9:00 утра
schedule.every().day.at("09:00").do(job)

# Запустить задачу каждый понедельник в 12:30 дня
schedule.every().monday.at("12:30").do(job)
```

### Управление несколькими задачами
Вы можете запланировать несколько задач, определив отдельные функции и назначив им разные интервалы.

```python
def task1():
    print("Задача 1 выполнена!")

def task2():
    print("Задача 2 выполнена!")

schedule.every(5).seconds.do(task1)
schedule.every().hour.do(task2)

while True:
    schedule.run_pending()
    time.sleep(1)
```

### Удаление запланированных задач
Чтобы удалить задачу, используйте `schedule.clear()`. Вы можете удалить все задачи или указать конкретную, используя теги.

```python
# Добавление задач с тегами
schedule.every(5).seconds.do(task1).tag("fast_task")
schedule.every().hour.do(task2).tag("hourly_task")

# Удалить конкретную задачу по тегу
schedule.clear("fast_task")

# Удалить все запланированные задачи
schedule.clear()
```

### Запуск планировщика в фоновом режиме
Для приложений с графическим интерфейсом или постоянным фоновым выполнением можно запустить планировщик в отдельном потоке.

```python
import threading

def run_scheduler():
    while True:
        schedule.run_pending()
        time.sleep(1)

scheduler_thread = threading.Thread(target=run_scheduler, daemon=True)
scheduler_thread.start()
```

### Заключение
Библиотека `schedule` — это отличный выбор для простой автоматизации задач в Python на основе времени. Благодаря удобному синтаксису и гибкости она позволяет эффективно планировать выполнение задач без сложностей cron-заданий или сторонних планировщиков. Независимо от того, работаете ли вы с фоновыми процессами или автоматизируете рабочие процессы, `schedule` — это легкое и эффективное решение.

Используя `schedule` в своих проектах, вы сможете автоматизировать рутинные задачи без лишних усилий, повышая их эффективность и надежность.

