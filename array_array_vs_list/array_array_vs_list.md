# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `array.array` –≤ Python: –∫–æ–≥–¥–∞ –∏ –∑–∞—á–µ–º –ø—Ä–∏–º–µ–Ω—è—Ç—å


`array.array` ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ Python, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö —á–∏—Å–µ–ª. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `list`, –º–∞—Å—Å–∏–≤—ã `array.array` –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ `array.array` —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

---

## üîπ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `array.array`?

### 1. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏ —á–∏—Å–µ–ª

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö `array.array` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å, –ø–æ—Å–∫–æ–ª—å–∫—É —Ö—Ä–∞–Ω–∏—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º –≤–∏–¥–µ. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `list`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã Python –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π, `array.array` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –±–ª–æ–∫ –ø–∞–º—è—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–º —á–∏—Å–ª–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ –ø—Ä–æ—Å—Ç—ã—Ö –±–∞–π—Ç–æ–≤—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π. –≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞–º–∏ Python, –∏ —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `array.array` –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –∏–ª–∏ –º–∏–ª–ª–∏–∞—Ä–¥—ã —á–∏—Å–µ–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—É—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

–ü—Ä–∏–º–µ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É `array.array` –∏ `list`:

```python
import array
import sys

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏ –º–∞—Å—Å–∏–≤–∞ —Å –º–∏–ª–ª–∏–æ–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤
list_numbers = list(range(10**6))
array_numbers = array.array('i', range(10**6))

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ–º–æ–π –ø–∞–º—è—Ç–∏
print("–†–∞–∑–º–µ—Ä —Å–ø–∏—Å–∫–∞:", sys.getsizeof(list_numbers))  # –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ
print("–†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞:", sys.getsizeof(array_numbers))  # –ú–µ–Ω—å—à–µ, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ
```

### 2. –ö–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ß—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ `array.array` —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –Ω–∞–¥ `list`, –ø–æ—Å–∫–æ–ª—å–∫—É –º–∞—Å—Å–∏–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏.

```python
arr = array.array('d', [1.1, 2.2, 3.3, 4.4, 5.5])
sum_arr = sum(arr)  # –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –¥–ª—è list
```

### 3. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ C-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö –≤ C –∏–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å `ctypes` –∏ `struct`, `array.array` –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞–¥–∞—á—É. –ú–∞—Å—Å–∏–≤ `array.array` —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º –≤–∏–¥–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ —É–¥–æ–±–Ω—ã–º –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –Ω–∞—Ç–∏–≤–Ω—ã–µ C-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ API, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–∏—Å–µ–ª –≤ –≤–∏–¥–µ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –±–ª–æ–∫–∞ –ø–∞–º—è—Ç–∏.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å `ctypes`:

```python
from ctypes import c_double
import array

arr = array.array('d', [1.1, 2.2, 3.3])
c_arr = (c_double * len(arr))(*arr)  # –°–æ–∑–¥–∞–Ω–∏–µ C-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `array.array` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –Ω–∞ C.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å `struct`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```python
import struct
import array

arr = array.array('i', [10, 20, 30])
binary_data = struct.pack(f'{len(arr)}i', *arr)  # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
unpacked_data = struct.unpack(f'{len(arr)}i', binary_data)
print(unpacked_data)  # (10, 20, 30)
```

### 4. –î–ª—è –æ–±–º–µ–Ω–∞ –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–∏—Å–ª–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, `array.array` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã `tobytes()` –∏ `frombytes()`. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–π—Ç–æ–≤ –∏ –æ–±—Ä–∞—Ç–Ω–æ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π, –∫–∞–∫ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å–ø–∏—Å–∫–æ–≤.

–ü—Ä–∏–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ –∏–∑ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```python
arr = array.array('i', [1, 2, 3, 4])
binary_data = arr.tobytes()

new_arr = array.array('i')
new_arr.frombytes(binary_data)
print(new_arr)  # array('i', [1, 2, 3, 4])
```

–≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏, —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏ –∏–ª–∏ –±–∏–Ω–∞—Ä–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ —á–∏—Å–ª–æ–≤—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –≤ —Å–∂–∞—Ç–æ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º –≤–∏–¥–µ.

### 5. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `array.array` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏.

```python
arr = array.array('i', [100, 200, 300])
# arr.append('hello')  # –û—à–∏–±–∫–∞! –û–∂–∏–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ int
```

### 6. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª –≤ —Ñ–∞–π–ª–µ –∏ –±—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –µ–≥–æ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π, `array.array` –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –∑–∞–¥–∞—á—É.

```python
arr = array.array('i', [10, 20, 30])
arr.tofile(open('data.bin', 'wb'))

new_arr = array.array('i')
new_arr.fromfile(open('data.bin', 'rb'), 3)
print(new_arr)  # array('i', [10, 20, 30])
```





## üîπ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `array.array` –∏ `list`

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞      | `array.array`           | `list`               |
|--------------------|----------------------|----------------------|
| –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö        | –û–¥–Ω–æ—Ç–∏–ø–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã  | –†–∞–∑–Ω–æ—Ä–æ–¥–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã |
| –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ | –ú–µ–Ω—å—à–µ                | –ë–æ–ª—å—à–µ               |
| –°–∫–æ—Ä–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π | –ë—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ —á–∏—Å–ª–∞—Ö    | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ            |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç–æ–¥–æ–≤ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è          | –ë–æ–≥–∞—Ç—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª   |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å     | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è C API    | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π        |
| –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ   | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `tobytes()` | –¢—Ä–µ–±—É–µ—Ç `pickle` –∏–ª–∏ `struct` |

üöÄ –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á–∏—Å–ª–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `array.array`. 
–î–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `list`!

